# @makebelieve21213-packages/logger

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ NestJS –Ω–∞ –±–∞–∑–µ Winston —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∑–∞–ø–∏—Å–∏ –ª–æ–≥–æ–≤ –≤ —Ñ–∞–π–ª—ã —Å —Ä–æ—Ç–∞—Ü–∏–µ–π –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ Logstash.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø–∞–∫–µ—Ç–∞)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
- [API Reference](#-api-reference)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–†–∞—Å—à–∏—Ä—è–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π NestJS Logger** - –ø–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —ç–∫–æ—Å–∏—Å—Ç–µ–º–æ–π NestJS
- ‚úÖ **Winston –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º** - –º–æ—â–Ω—ã–π –∏ –≥–∏–±–∫–∏–π –ª–æ–≥–≥–µ—Ä –¥–ª—è Node.js
- ‚úÖ **–¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å** - —Ä–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª—ã** - –≤—Å–µ –ª–æ–≥–∏ (–∫—Ä–æ–º–µ debug) —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
- ‚úÖ **–†–æ—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –∏–ª–∏ –ø–æ —Ä–∞–∑–º–µ—Ä—É
- ‚úÖ **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º** - –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –ø–∏—à–µ—Ç –≤ —Å–≤–æ—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
- ‚úÖ **–ö–∞—Å—Ç–æ–º–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ª–æ–≥–æ–≤** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–±—Å–æ–ª—é—Ç–Ω—ã—Ö –∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—É—Ç–µ–π
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Logstash** - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ª–æ–≥–æ–≤ —á–µ—Ä–µ–∑ TCP
- ‚úÖ **Transient scope** - –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–π —ç–∫–∑–µ–º–ø–ª—è—Ä —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- ‚úÖ **100% –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏** - –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ **TypeScript** - –ø–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Node.js**: >= 22.11.0
- **NestJS**: >= 11.0.0

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm install @makebelieve21213-packages/logger
```

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–ü–∞–∫–µ—Ç —Ç—Ä–µ–±—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ peer dependencies:

```json
{
  "@nestjs/common": "^11.0.0",
  "reflect-metadata": "^0.1.13 || ^0.2.0",
  "rxjs": "^7.0.0"
}
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–∞

```
src/
‚îú‚îÄ‚îÄ configs/                              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Winston
‚îÇ   ‚îú‚îÄ‚îÄ __tests__/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ winston.config.spec.ts        # –¢–µ—Å—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Winston
‚îÇ   ‚îî‚îÄ‚îÄ winston.config.ts                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Winston —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ errors/                               # –ö–∞—Å—Ç–æ–º–Ω—ã–µ –æ—à–∏–±–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ __tests__/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logger.error.spec.ts          # –¢–µ—Å—Ç—ã LoggerError
‚îÇ   ‚îî‚îÄ‚îÄ logger.error.ts                   # LoggerError
‚îÇ
‚îú‚îÄ‚îÄ interfaces/                           # TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îÇ   ‚îî‚îÄ‚îÄ logger.interface.ts               # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Logger (—Ä–∞—Å—à–∏—Ä—è–µ—Ç NestJS)
‚îÇ
‚îú‚îÄ‚îÄ main/                                 # NestJS –º–æ–¥—É–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ __tests__/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger.module.spec.ts         # –¢–µ—Å—Ç—ã –º–æ–¥—É–ª—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logger.service.spec.ts        # –¢–µ—Å—Ç—ã —Å–µ—Ä–≤–∏—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ logger.module.ts                  # LoggerModule (Global)
‚îÇ   ‚îî‚îÄ‚îÄ logger.service.ts                 # LoggerService (Transient)
‚îÇ
‚îú‚îÄ‚îÄ types/                                # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îú‚îÄ‚îÄ logger.types.ts                   # –¢–∏–ø—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ winston-logstash.d.ts             # –¢–∏–ø—ã –¥–ª—è winston-logstash
‚îÇ
‚îú‚îÄ‚îÄ utils/                                # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ __tests__/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ constants.spec.ts             # –¢–µ—Å—Ç—ã —É—Ç–∏–ª–∏—Ç
‚îÇ   ‚îú‚îÄ‚îÄ constants.ts                      # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ directory.ts                      # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ formatters.ts                     # –§–æ—Ä–º–∞—Ç—Ç–µ—Ä—ã –¥–ª—è –∫–æ–Ω—Å–æ–ª–∏ –∏ —Ñ–∞–π–ª–æ–≤
‚îÇ
‚îî‚îÄ‚îÄ index.ts                              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (—ç–∫—Å–ø–æ—Ä—Ç—ã)
```

## üîß –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ AppModule

```typescript
import { Module } from '@nestjs/common';
import { ConfigModule, ConfigService } from '@nestjs/config';
import { LoggerModule } from '@makebelieve21213-packages/logger';

@Module({
  imports: [
    ConfigModule.forRoot({ isGlobal: true }),
    LoggerModule.forRootAsync<[ConfigService]>({
      useFactory: (configService: ConfigService) => ({
        serviceName: configService.get('SERVICE_NAME') || 'unknown-service',
        maxFiles: configService.get('LOGGER_MAX_FILES') || 30,
        maxLinesPerFile: configService.get('LOGGER_MAX_LINES_PER_FILE') || 10000,
        logstashHost: configService.get('LOGSTASH_HOST'),
        logstashPort: configService.get('LOGSTASH_PORT')
          ? parseInt(configService.get('LOGSTASH_PORT'))
          : undefined,
        logDir: configService.get('LOGGER_LOG_DIR'), // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
      }),
      inject: [ConfigService],
    }),
  ],
})
export class AppModule {}
```

### –®–∞–≥ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö

```typescript
import { Injectable } from '@nestjs/common';
import LoggerService from '@makebelieve21213-packages/logger';

@Injectable()
export default class UserService {
  constructor(private readonly logger: LoggerService) {
    this.logger.setContext('UserService');
  }

  async createUser(userData: CreateUserDto): Promise<User> {
    this.logger.log('Creating new user');

    try {
      const user = await this.userRepository.save(userData);
      this.logger.log(`User created successfully: ${user.id}`);
      return user;
    } catch (error) {
      this.logger.error(`Failed to create user: ${error.message}`, error.stack);
      throw error;
    }
  }
}
```

### –®–∞–≥ 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ main.ts

```typescript
import { NestFactory } from '@nestjs/core';
import { AppModule } from './app/app.module';
import LoggerService from '@makebelieve21213-packages/logger';

async function bootstrap() {
  const app = await NestFactory.create(AppModule, {
    bufferLogs: true,
  });

  const logger = app.get(LoggerService);
  logger.setContext('Bootstrap');
  app.useLogger(logger);

  await app.listen(3000);
  logger.log('Application is running on: http://localhost:3000');
}

bootstrap();
```

## üìö –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### LoggerService

**–ú–µ—Ç–æ–¥—ã:**

#### `log(message: string, context?: string): void`

–û–±—ã—á–Ω—ã–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –ª–æ–≥. –í—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å (–∑–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç) –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Ñ–∞–π–ª.

```typescript
this.logger.log('Server started successfully');
this.logger.log('Request processed', 'HttpController');
```

#### `error(message: string, trace?: string, context?: string): void`

–õ–æ–≥ –æ—à–∏–±–∫–∏. –í—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å (–∫—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç), –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Ñ–∞–π–ª –∏ **–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Logstash** (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω).

```typescript
this.logger.error('Database connection failed', error.stack);
this.logger.error('Payment failed', error.stack, 'PaymentService');
```

#### `warn(message: string, context?: string): void`

–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ. –í—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å (–∂–µ–ª—Ç—ã–π —Ü–≤–µ—Ç) –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Ñ–∞–π–ª.

```typescript
this.logger.warn('API rate limit approaching');
this.logger.warn('Cache miss', 'CacheService');
```

#### `debug(message: string, context?: string): void`

–û—Ç–ª–∞–¥–æ—á–Ω—ã–π –ª–æ–≥. **–¢–æ–ª—å–∫–æ –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å** (–≥–æ–ª—É–±–æ–π —Ü–≤–µ—Ç), –ù–ï –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Ñ–∞–π–ª.

```typescript
this.logger.debug('Processing request data');
this.logger.debug('Cache hit', 'CacheService');
```

#### `verbose(message: string, context?: string): void`

–ê–ª–∏–∞—Å –¥–ª—è –º–µ—Ç–æ–¥–∞ `log()`. –î–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å NestJS LoggerService.

```typescript
this.logger.verbose('Detailed operation info');
```

#### `setContext(context: string): void`

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –≤—Å–µ—Ö –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –ª–æ–≥–æ–≤.

```typescript
constructor(private readonly logger: LoggerService) {
  this.logger.setContext('MyService');
}
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### LoggerConfig

```typescript
interface LoggerConfig {
  serviceName: string;               // –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ: –∏–º—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞
  maxFiles?: number;                 // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –¥–Ω–µ–π —Ö—Ä–∞–Ω–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30)
  maxLinesPerFile?: number;          // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —Å—Ç—Ä–æ–∫ –≤ —Ñ–∞–π–ª–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10000)
  logstashHost?: string;             // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —Ö–æ—Å—Ç Logstash
  logstashPort?: number;             // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ø–æ—Ä—Ç Logstash
  logDir?: string;                   // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –ª–æ–≥–æ–≤
}
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ª–æ–≥–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `process.cwd()/logs/{serviceName}/`.

–ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —á–µ—Ä–µ–∑ `logDir`:
- **–ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å
- **–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å**: —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ `process.cwd()`

–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:

```
logs/
‚îú‚îÄ‚îÄ api-service/
‚îÇ   ‚îú‚îÄ‚îÄ 2024-01-15.log
‚îÇ   ‚îî‚îÄ‚îÄ 2024-01-16.log
‚îî‚îÄ‚îÄ dashboard-service/
    ‚îú‚îÄ‚îÄ 2024-01-15.log
    ‚îî‚îÄ‚îÄ 2024-01-16.log
```

### –§–æ—Ä–º–∞—Ç –ª–æ–≥–∞ –≤ —Ñ–∞–π–ª–µ (JSON)

```json
{
  "timestamp": "2024-01-15 10:30:45",
  "level": "error",
  "service": "api-service",
  "context": "UserService",
  "message": "Failed to create user",
  "trace": "Error: Validation failed\n    at UserService.create..."
}
```

### –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤

- **–ü–æ —Ä–∞–∑–º–µ—Ä—É**: –ù–æ–≤—ã–π —Ñ–∞–π–ª —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ `maxLinesPerFile` —Å—Ç—Ä–æ–∫ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10,000)
- **–ü–æ –¥–∞—Ç–µ**: –ö–∞–∂–¥—ã–π –¥–µ–Ω—å —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π —Ñ–∞–π–ª —Å –¥–∞—Ç–æ–π –≤ –∏–º–µ–Ω–∏
- **–ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞**: –°—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã —É–¥–∞–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `maxFiles` –¥–Ω–µ–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30)

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Logstash

–ü—Ä–∏ —É–∫–∞–∑–∞–Ω–∏–∏ `logstashHost` –∏ `logstashPort` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –≤—Å–µ –ª–æ–≥–∏ —É—Ä–æ–≤–Ω—è **error** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ Logstash —á–µ—Ä–µ–∑ TCP.

```typescript
LoggerModule.forRootAsync({
  useFactory: () => ({
    serviceName: 'api-service',
    logstashHost: 'localhost',
    logstashPort: 5000,
  }),
})
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–∞–∫–µ—Ç –∏–º–µ–µ—Ç **100% –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏**.

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
npm test

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
npm run test:coverage
```

### –ú–æ–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```typescript
import { Test } from '@nestjs/testing';
import LoggerService from '@makebelieve21213-packages/logger';

const mockLogger = {
  log: jest.fn(),
  error: jest.fn(),
  warn: jest.fn(),
  debug: jest.fn(),
  verbose: jest.fn(),
  setContext: jest.fn(),
};

const module = await Test.createTestingModule({
  providers: [
    MyService,
    {
      provide: LoggerService,
      useValue: mockLogger,
    },
  ],
}).compile();
```

## üö® Troubleshooting

### –õ–æ–≥–∏ –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `{logDir}/{serviceName}`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ù–ï `debug` (debug —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Å–æ–ª—å)

### –ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Logstash

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `logstashHost` –∏ `logstashPort` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Logstash —Å–µ—Ä–≤–µ—Ä–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è —É—Ä–æ–≤–µ–Ω—å `error` (—Ç–æ–ª—å–∫–æ error –∏–¥—É—Ç –≤ Logstash)

### Debug –ª–æ–≥–∏ –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª

Debug –ª–æ–≥–∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—á–µ–Ω—å —á–∞—Å—Ç—ã–º–∏. –ß—Ç–æ–±—ã –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ª–∏—à–Ω—é—é –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É, –æ–Ω–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Å–æ–ª—å.

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## üë• –ê–≤—Ç–æ—Ä

Skryabin Aleksey
