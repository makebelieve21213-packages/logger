# @makebelieve21213-packages/logger

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ NestJS –Ω–∞ –±–∞–∑–µ Winston —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∑–∞–ø–∏—Å–∏ –ª–æ–≥–æ–≤ –≤ —Ñ–∞–π–ª—ã —Å —Ä–æ—Ç–∞—Ü–∏–µ–π –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ Logstash.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–†–∞—Å—à–∏—Ä—è–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π NestJS Logger** - –ø–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —ç–∫–æ—Å–∏—Å—Ç–µ–º–æ–π NestJS
- ‚úÖ **Winston –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º** - –º–æ—â–Ω—ã–π –∏ –≥–∏–±–∫–∏–π –ª–æ–≥–≥–µ—Ä –¥–ª—è Node.js
- ‚úÖ **–¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å** - —Ä–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª—ã** - –≤—Å–µ –ª–æ–≥–∏ (–∫—Ä–æ–º–µ debug) —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
- ‚úÖ **–†–æ—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –∏–ª–∏ –ø–æ —Ä–∞–∑–º–µ—Ä—É
- ‚úÖ **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º** - –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –ø–∏—à–µ—Ç –≤ —Å–≤–æ—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
- ‚úÖ **–ö–∞—Å—Ç–æ–º–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ª–æ–≥–æ–≤** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–±—Å–æ–ª—é—Ç–Ω—ã—Ö –∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—É—Ç–µ–π
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Logstash** - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ª–æ–≥–æ–≤ —á–µ—Ä–µ–∑ TCP
- ‚úÖ **Transient scope** - –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–π —ç–∫–∑–µ–º–ø–ª—è—Ä —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- ‚úÖ **100% –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏** - –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ **TypeScript** - –ø–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pnpm add @makebelieve21213-packages/logger
```

–ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ `package.json` –≤–∞—à–µ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞:
```json
{
  "dependencies": {
    "@makebelieve21213-packages/logger": "workspace:*"
  }
}
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ AppModule

```typescript
import { Module } from '@nestjs/common';
import { ConfigModule, ConfigService } from '@nestjs/config';
import { LoggerModule } from '@makebelieve21213-packages/logger';

@Module({
  imports: [
    ConfigModule.forRoot({ isGlobal: true }),
    LoggerModule.forRootAsync<[ConfigService]>({
      useFactory: (configService: ConfigService) => ({
        serviceName: configService.get('SERVICE_NAME') || 'unknown-service',
        maxFiles: configService.get('LOGGER_MAX_FILES') || 30,
        maxLinesPerFile: configService.get('LOGGER_MAX_LINES_PER_FILE') || 10000,
        logstashHost: configService.get('LOGSTASH_HOST'),
        logstashPort: configService.get('LOGSTASH_PORT') 
          ? parseInt(configService.get('LOGSTASH_PORT')) 
          : undefined,
        logDir: configService.get('LOGGER_LOG_DIR'), // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
      }),
      inject: [ConfigService],
    }),
  ],
})
export class AppModule {}
```

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö

```typescript
import { Injectable } from '@nestjs/common';
import LoggerService from '@makebelieve21213-packages/logger';

@Injectable()
export default class UserService {
  constructor(
    private readonly logger: LoggerService
  ) {
    this.logger.setContext('UserService');
  }

  async createUser(userData: CreateUserDto): Promise<User> {
    this.logger.log('Creating new user');
    
    try {
      const user = await this.userRepository.save(userData);
      this.logger.log(`User created successfully: ${user.id}`);
      return user;
    } catch (error) {
      this.logger.error(
        `Failed to create user: ${error.message}`,
        error.stack
      );
      throw error;
    }
  }

  async getUserById(id: string): Promise<User> {
    this.logger.debug(`Fetching user by ID: ${id}`); // –¢–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Å–æ–ª—å
    
    const user = await this.userRepository.findById(id);
    
    if (!user) {
      this.logger.warn(`User not found: ${id}`);
      throw new NotFoundException('User not found');
    }
    
    return user;
  }
}
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ main.ts

```typescript
import { NestFactory } from '@nestjs/core';
import { AppModule } from './app/app.module';
import LoggerService from '@makebelieve21213-packages/logger';

async function bootstrap() {
  const app = await NestFactory.create(AppModule, {
    bufferLogs: true,
  });

  // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—à –ª–æ–≥–≥–µ—Ä –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  const logger = app.get(LoggerService);
  logger.setContext('Bootstrap');
  app.useLogger(logger);

  await app.listen(3000);
  logger.log('Application is running on: http://localhost:3000');
}

bootstrap();
```

## üìä –ú–µ—Ç–æ–¥—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### `log(message: string, context?: string): void`
–û–±—ã—á–Ω—ã–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –ª–æ–≥. –í—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å (–∑–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç) –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Ñ–∞–π–ª.

```typescript
this.logger.log('Server started successfully');
this.logger.log('Request processed', 'HttpController');
```

### `error(message: string, trace?: string, context?: string): void`
–õ–æ–≥ –æ—à–∏–±–∫–∏. –í—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å (–∫—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç), –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Ñ–∞–π–ª –∏ **–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Logstash** (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω).

```typescript
this.logger.error('Database connection failed', error.stack);
this.logger.error('Payment failed', error.stack, 'PaymentService');
```

### `warn(message: string, context?: string): void`
–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ. –í—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å (–∂–µ–ª—Ç—ã–π —Ü–≤–µ—Ç) –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Ñ–∞–π–ª.

```typescript
this.logger.warn('API rate limit approaching');
this.logger.warn('Cache miss', 'CacheService');
```

### `debug(message: string, context?: string): void`
–û—Ç–ª–∞–¥–æ—á–Ω—ã–π –ª–æ–≥. **–¢–æ–ª—å–∫–æ –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å** (–≥–æ–ª—É–±–æ–π —Ü–≤–µ—Ç), –ù–ï –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Ñ–∞–π–ª.

```typescript
this.logger.debug('Processing request data');
this.logger.debug('Cache hit', 'CacheService');
```

### `verbose(message: string, context?: string): void`
–ê–ª–∏–∞—Å –¥–ª—è –º–µ—Ç–æ–¥–∞ `log()`. –î–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å NestJS LoggerService.

```typescript
this.logger.verbose('Detailed operation info');
```

### `setContext(context: string): void`
–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –≤—Å–µ—Ö –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –ª–æ–≥–æ–≤.

```typescript
constructor(private readonly logger: LoggerService) {
  this.logger.setContext('MyService');
}
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–∞

```
packages-packages/logger/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ configs/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __tests__/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ winston.config.spec.ts    # –¢–µ—Å—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Winston
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ winston.config.ts             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Winston —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ errors/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __tests__/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logger.error.spec.ts     # –¢–µ—Å—Ç—ã LoggerError
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logger.error.ts               # –ö–∞—Å—Ç–æ–º–Ω–∞—è –æ—à–∏–±–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ interfaces/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logger.interface.ts           # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Logger
‚îÇ   ‚îú‚îÄ‚îÄ main/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __tests__/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger.service.spec.ts    # –¢–µ—Å—Ç—ã —Å–µ—Ä–≤–∏—Å–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logger.module.spec.ts     # –¢–µ—Å—Ç—ã –º–æ–¥—É–ª—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger.module.ts              # NestJS –º–æ–¥—É–ª—å (Global)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logger.service.ts             # –°–µ—Ä–≤–∏—Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (Transient)
‚îÇ   ‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logger.types.ts               # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __tests__/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ constants.spec.ts         # –¢–µ—Å—Ç—ã —É—Ç–∏–ª–∏—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ constants.ts                  # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ directory.ts                  # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ formatters.ts                 # –§–æ—Ä–º–∞—Ç—Ç–µ—Ä—ã
‚îÇ   ‚îî‚îÄ‚îÄ index.ts                          # –≠–∫—Å–ø–æ—Ä—Ç—ã –ø–∞–∫–µ—Ç–∞
‚îú‚îÄ‚îÄ dist/                                 # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
‚îî‚îÄ‚îÄ logs/                                 # –õ–æ–≥–∏ (—Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ª–æ–≥–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `process.cwd()/logs/{serviceName}/`.

–ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —á–µ—Ä–µ–∑ `logDir` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
- **–ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å
- **–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å**: —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ `process.cwd()`

–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:

```
logs/                                    # –ò–ª–∏ –∫–∞—Å—Ç–æ–º–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
‚îú‚îÄ‚îÄ api-service/                         # –ü–æ–¥–ø–∞–ø–∫–∞ —Å –∏–º–µ–Ω–µ–º —Å–µ—Ä–≤–∏—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ 2024-01-15.log                  # –í—Å–µ –ª–æ–≥–∏ –∑–∞ –¥–µ–Ω—å –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
‚îÇ   ‚îî‚îÄ‚îÄ 2024-01-16.log
‚îî‚îÄ‚îÄ dashboard-service/
    ‚îú‚îÄ‚îÄ 2024-01-15.log
    ‚îî‚îÄ‚îÄ 2024-01-16.log
```

**–ü—É—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**: `process.cwd()/logs/{serviceName}/{YYYY-MM-DD}.log`

### –§–æ—Ä–º–∞—Ç –ª–æ–≥–∞ –≤ —Ñ–∞–π–ª–µ (JSON)

```json
{
  "timestamp": "2024-01-15 10:30:45",
  "level": "error",
  "service": "api-service",
  "context": "UserService",
  "message": "Failed to create user",
  "trace": "Error: Validation failed\n    at UserService.create..."
}
```

## üîÑ –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤

- **–ü–æ —Ä–∞–∑–º–µ—Ä—É**: –ù–æ–≤—ã–π —Ñ–∞–π–ª —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ `maxLinesPerFile` —Å—Ç—Ä–æ–∫ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10,000)
- **–ü–æ –¥–∞—Ç–µ**: –ö–∞–∂–¥—ã–π –¥–µ–Ω—å —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π —Ñ–∞–π–ª —Å –¥–∞—Ç–æ–π –≤ –∏–º–µ–Ω–∏
- **–ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞**: –°—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã —É–¥–∞–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `maxFiles` –¥–Ω–µ–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30)

## üìà –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Logstash

–ü—Ä–∏ —É–∫–∞–∑–∞–Ω–∏–∏ `logstashHost` –∏ `logstashPort` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –≤—Å–µ –ª–æ–≥–∏ —É—Ä–æ–≤–Ω—è **error** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ Logstash —á–µ—Ä–µ–∑ TCP –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥–∞.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Logstash

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Logstash (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ Docker):

```bash
docker run -d --name=logstash -p 5000:5000 logstash/logstash:latest
```

2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

```typescript
LoggerModule.forRootAsync({
  useFactory: () => ({
    serviceName: 'api-service',
    logstashHost: 'localhost',
    logstashPort: 5000,
  }),
})
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–∞–∫–µ—Ç –∏–º–µ–µ—Ç 100% –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏:

```bash
cd packages-packages/logger
pnpm test
pnpm test:coverage
```

### –ú–æ–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```typescript
import { Test } from '@nestjs/testing';
import LoggerService from '@makebelieve21213-packages/logger';

const mockLogger = {
  log: jest.fn(),
  error: jest.fn(),
  warn: jest.fn(),
  debug: jest.fn(),
  verbose: jest.fn(),
  setContext: jest.fn(),
};

const module = await Test.createTestingModule({
  providers: [
    MyService,
    {
      provide: LoggerService,
      useValue: mockLogger,
    },
  ],
}).compile();
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### LoggerConfig

```typescript
interface LoggerConfig {
  serviceName: string;              // –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ: –∏–º—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞
  maxFiles?: number;                // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –¥–Ω–µ–π —Ö—Ä–∞–Ω–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30)
  maxLinesPerFile?: number;         // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —Å—Ç—Ä–æ–∫ –≤ —Ñ–∞–π–ª–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10000)
  logstashHost?: string;            // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —Ö–æ—Å—Ç Logstash
  logstashPort?: number;            // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ø–æ—Ä—Ç Logstash
  logDir?: string;                  // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –ª–æ–≥–æ–≤
}
```

### –¢–∏–ø—ã TypeScript

```typescript
interface Logger extends NestLoggerService {
  log(message: string, context?: string): void;
  error(message: string, trace?: string, context?: string): void;
  warn(message: string, context?: string): void;
  debug(message: string, context?: string): void;
  verbose(message: string, context?: string): void;
  setContext(context: string): void;
}
```

## üèóÔ∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pnpm install

# –°–±–æ—Ä–∫–∞
pnpm build

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
pnpm test

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pnpm test:coverage

# –õ–∏–Ω—Ç–µ—Ä
pnpm lint
pnpm lint:fix

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
pnpm format
pnpm format:fix
```

## üê≥ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ Docker –ª–æ–∫–∞–ª—å–Ω–æ

### –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞

–°–æ–±–µ—Ä–∏—Ç–µ Docker –æ–±—Ä–∞–∑ –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞:

```bash
docker build -t logger-package:latest .
```

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

#### –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫

```bash
docker run -d \
  --name logger-package \
  logger-package:latest
```

#### –° –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ª–æ–≥–æ–≤

–ß—Ç–æ–±—ã –ª–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –Ω–∞ —Ö–æ—Å—Ç–µ:

```bash
docker run -d \
  --name logger-package \
  -v $(pwd)/logs:/app/logs \
  logger-package:latest
```

#### –° –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
docker run -d \
  --name logger-package \
  -v $(pwd)/logs:/app/logs \
  -e SERVICE_NAME=logger-service \
  -e LOGGER_MAX_FILES=30 \
  -e LOGGER_MAX_LINES_PER_FILE=10000 \
  -e LOGSTASH_HOST=localhost \
  -e LOGSTASH_PORT=5000 \
  logger-package:latest
```

#### –° –∫–∞—Å—Ç–æ–º–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π –ª–æ–≥–æ–≤

```bash
docker run -d \
  --name logger-package \
  -v /var/log/myapp:/app/logs \
  -e LOGGER_LOG_DIR=/app/logs \
  logger-package:latest
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

```bash
# –õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (stdout/stderr)
docker logs logger-package

# –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker logs -f logger-package

# –õ–æ–≥–∏ –∏–∑ —Ñ–∞–π–ª–æ–≤ (–µ—Å–ª–∏ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è)
tail -f logs-packages/logger-service/$(date +%Y-%m-%d).log
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker stop logger-package

# –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker rm logger-package

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
docker rm -f logger-package
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ docker-compose

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `docker-compose.yml`:

```yaml
version: '3.8'

services:
  logger:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: logger-package
    volumes:
      - ./logs:/app/logs
    environment:
      - SERVICE_NAME=logger-service
      - LOGGER_MAX_FILES=30
      - LOGGER_MAX_LINES_PER_FILE=10000
      - LOGSTASH_HOST=logstash
      - LOGSTASH_PORT=5000
      - LOGGER_LOG_DIR=/app/logs
    networks:
      - logger-network
    restart: unless-stopped

  logstash:
    image: logstash/logstash:latest
    container_name: logstash
    ports:
      - "5000:5000"
    volumes:
      - ./logstash-config:/usr/share/logstash/config
    networks:
      - logger-network
    restart: unless-stopped

networks:
  logger-network:
    driver: bridge
```

–ó–∞–ø—É—Å–∫:

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f logger

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –≤ Docker

1. **–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ª–æ–≥–æ–≤**: –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ª–æ–≥–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ `/app/logs` –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞ —Ö–æ—Å—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ volume mount.

2. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**: –û–±—Ä–∞–∑ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `nodejs` (UID 1001) –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞:

```bash
sudo chown -R 1001:1001 logs/
```

3. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**: –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ `ConfigService`.

4. **Multi-stage build**: Dockerfile –∏—Å–ø–æ–ª—å–∑—É–µ—Ç multi-stage build –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–±—Ä–∞–∑–∞. Production –æ–±—Ä–∞–∑ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.

## üîë –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### Transient Scope
LoggerService –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `Scope.TRANSIENT`, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
- –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –ø–æ–ª—É—á–∞–µ—Ç **—Å–≤–æ–π —ç–∫–∑–µ–º–ø–ª—è—Ä** –ª–æ–≥–≥–µ—Ä–∞
- –ú–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
- Winston logger —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞

### Global Module
LoggerModule –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ `@Global()`:
- –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è **–æ–¥–∏–Ω —Ä–∞–∑** –≤ AppModule
- –î–æ—Å—Ç—É–ø–µ–Ω –≤–æ **–≤—Å–µ—Ö –º–æ–¥—É–ª—è—Ö** –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `forRootAsync()`

### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- **error** ‚Üí –∫–æ–Ω—Å–æ–ª—å (–∫—Ä–∞—Å–Ω—ã–π) + —Ñ–∞–π–ª + Logstash (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
- **warn** ‚Üí –∫–æ–Ω—Å–æ–ª—å (–∂–µ–ª—Ç—ã–π) + —Ñ–∞–π–ª
- **log** (info) ‚Üí –∫–æ–Ω—Å–æ–ª—å (–∑–µ–ª–µ–Ω—ã–π) + —Ñ–∞–π–ª
- **debug** ‚Üí —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Å–æ–ª—å (–≥–æ–ª—É–±–æ–π), –ù–ï –≤ —Ñ–∞–π–ª
- **verbose** ‚Üí alias –¥–ª—è `log` (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- `onModuleInit()` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è NestJS –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–¥—É–ª—è
- –°–æ–∑–¥–∞–µ—Ç Winston logger —Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞–º–∏
- –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å logger –¥–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ ‚Üí –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è `LoggerError`

### Graceful Shutdown
- `onModuleDestroy()` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è NestJS –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç—ã Winston (TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, —Ñ–∞–π–ª–æ–≤—ã–µ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã)
- –í–∞–∂–Ω–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## ü§ù Contribution

Pull requests –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è! –î–ª—è –∫—Ä—É–ø–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–Ω–∞—á–∞–ª–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ issue –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è.

–ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –≤–Ω–µ—Å–µ–Ω–∏—é –≤–∫–ª–∞–¥–∞ —Å–º. –≤ [CONTRIBUTING.md](CONTRIBUTING.md).

## üìå –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –° –∫–∞—Å—Ç–æ–º–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π –ª–æ–≥–æ–≤

```typescript
LoggerModule.forRootAsync({
  useFactory: () => ({
    serviceName: 'api-service',
    logDir: '/var/log/myapp', // –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å
  }),
})
```

### –° –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º –ø—É—Ç–µ–º

```typescript
LoggerModule.forRootAsync({
  useFactory: () => ({
    serviceName: 'api-service',
    logDir: './custom-logs', // –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ process.cwd()
  }),
})
```

### –° Logstash

```typescript
LoggerModule.forRootAsync({
  useFactory: () => ({
    serviceName: 'api-service',
    logstashHost: 'localhost',
    logstashPort: 5000,
  }),
})
```

## ‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### –ü–æ—á–µ–º—É debug –ª–æ–≥–∏ –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª?
Debug –ª–æ–≥–∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—á–µ–Ω—å —á–∞—Å—Ç—ã–º–∏. –ß—Ç–æ–±—ã –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ª–∏—à–Ω—é—é –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É, –æ–Ω–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Å–æ–ª—å.

### –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ª–æ–≥–æ–≤?
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `logDir` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –∏–ª–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å.

### –ö–∞–∫ –æ—Ç–∫–ª—é—á–∏—Ç—å –∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª—ã?
–í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ —ç—Ç–æ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è. –í—Å–µ –ª–æ–≥–∏ —É—Ä–æ–≤–Ω—è info –∏ –≤—ã—à–µ –≤—Å–µ–≥–¥–∞ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª. –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Å–æ–ª—å, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ debug –ª–æ–≥–∏.

### –ü–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Transient scope?
–ß—Ç–æ–±—ã –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –º–æ–≥ –∏–º–µ—Ç—å —Å–≤–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å, –∏–∑ –∫–∞–∫–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –ø—Ä–∏—à–µ–ª –ª–æ–≥.

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ä–æ—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤?
–§–∞–π–ª—ã —Ä–æ—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –¥–≤—É–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º:
1. –ü–æ –¥–∞—Ç–µ - –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π —Ñ–∞–π–ª
2. –ü–æ —Ä–∞–∑–º–µ—Ä—É - –µ—Å–ª–∏ —Ñ–∞–π–ª –ø—Ä–µ–≤—ã—à–∞–µ—Ç `maxLinesPerFile` —Å—Ç—Ä–æ–∫, —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π —Ñ–∞–π–ª

–°—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `maxFiles` –¥–Ω–µ–π.
