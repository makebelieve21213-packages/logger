# Changelog

Все значимые изменения в этом проекте будут документироваться в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
и этот проект придерживается [Semantic Versioning](https://semver.org/lang/ru/).

## [1.0.5] - 2025-11-19

### Изменено
- Обновлены GitHub Actions workflows: теперь выполняются автоматические фиксы линтера и форматирования вместо простой проверки
- Добавлен автоматический коммит исправлений обратно в репозиторий при push в ветки main и develop
- Улучшена обработка изменений в CI/CD pipeline

## [1.0.4] - 2025-11-19

### Изменено
- Инициализация winstonLogger перенесена в конструктор - logger создается сразу при создании экземпляра LoggerService
- Удален метод `onModuleInit()` и интерфейс `OnModuleInit` - инициализация происходит в конструкторе
- Упрощена логика закрытия logger: удален публичный метод `close()`, закрытие происходит только через `onModuleDestroy()` при уничтожении модуля
- Убраны все проверки на существование logger в методах логирования - logger всегда инициализирован

## [1.0.3] - 2025-11-19

### Исправлено
- Исправлен workflow для публикации в npm: теперь корректно извлекается версия из тега релиза через `github.event.release.tag_name`
- Добавлено автоматическое добавление расширений `.js` к относительным импортам при сборке через `tsc-esm-fix`
- Исправлена конфигурация ESM модулей: удален `require` из `exports`, оставлен только `import` для корректной работы в ESM окружении
- Изменен `moduleResolution` в tsconfig.json с `node` на `bundler` для корректной работы с ESM и post-build инструментами
- Исправлен тест для `getDefaultLogDir`: добавлен мок для `existsSync` для корректной проверки существования директории `dist`

### Изменено
- Улучшена обработка ошибок в workflow публикации с подробным логированием
- Обновлена документация (README.md и llms.txt) с информацией о ESM пакете и процессе сборки
- Добавлено описание процесса сборки: tsc → tsc-alias → tsc-esm-fix
- Добавлена информация о техническом стеке и особенностях ESM модулей

## [1.0.2] - 2025-11-19

### Исправлено
- Добавлены относительные пути (`./`) в полях `main`, `types` и `exports` в package.json для корректного импорта пакета при установке как зависимости

## [1.0.1] - 2025-11-18

### Исправлено
- Исправлен конфликт между Prettier и ESLint по максимальной длине строки (установлен printWidth: 95 в Prettier)

### Изменено
- Обновлен workflow для автоматической публикации в npm registry при создании GitHub Release или push тега
- Версия в package.json теперь автоматически синхронизируется с версией тега при публикации

## [1.0.0] - 2025-11-18

### Добавлено
- Базовая функциональность логирования с Winston
- Поддержка записи логов в файлы с ротацией (winston-daily-rotate-file)
- Цветной вывод в консоль для разных уровней логирования
- Разделение логов по микросервисам (каждый сервис в свою директорию)
- Поддержка кастомной директории логов (абсолютные и относительные пути)
- Опциональная интеграция с Logstash через TCP
- Transient scope для индивидуального контекста каждого сервиса
- Graceful shutdown для корректного закрытия транспортов
- 100% покрытие тестами
- Полная типизация TypeScript
- Поддержка уровней: error, warn, log (info), debug, verbose
- Debug логи выводятся только в консоль (не в файл)
- Автоматическое создание директорий для логов
- Ротация файлов по дате и размеру
- Автоочистка старых файлов

### Документация
- Подробный README с примерами использования
- llms.txt для контекста ИИ агентов
- Инструкции по развертыванию в Docker
- Руководство по внесению вклада (CONTRIBUTING.md)

